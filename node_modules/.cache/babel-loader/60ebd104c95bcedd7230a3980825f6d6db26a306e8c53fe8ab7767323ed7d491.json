{"ast":null,"code":"import _slicedToArray from\"C:/Users/satoshi_khd/Desktop/tmdb-app-router/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useNavigate,useSearchParams,useParams}from\"react-router-dom\";import{service}from\"../../api/service\";import{Link}from\"react-router-dom\";import{useTranslation}from\"react-i18next\";import Rating from\"../../components/Rating/Rating\";import Image from\"../../components/Image/Image\";import Genres from\"../../components/Genres/Genres\";import PostersTemplate from\"../../components/PostersTemplate/PostersTemplate\";import Pagination from\"../../components/Pagination/Pagination\";import styles from\"./Movies.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Movies=function Movies(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),moviesData=_useState2[0],setMoviesData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalResults=_useState4[0],setTotalResults=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;useEffect(function(){service(\"https://api.themoviedb.org/3/movie/popular?language=\".concat(t(\"api-code\"),\"&page=\").concat(searchParams.get(\"page\")?searchParams.get(\"page\"):1),\"GET\").then(function(_ref){var data=_ref.data;setMoviesData(data.results);//data.results equal to 20, then content per page will be 20;\nsetTotalResults(data.total_results);});setSearchParams({page:searchParams.get(\"page\")?searchParams.get(\"page\"):1});},[i18n.language,searchParams]);var handleBackPage=function handleBackPage(){return setSearchParams({page:parseInt(searchParams.get(\"page\",10))-1});};var handleNextPage=function handleNextPage(){return setSearchParams({page:parseInt(searchParams.get(\"page\",10))+1});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.moviesContainer,children:moviesData.map(function(movies){return/*#__PURE__*/_jsx(\"div\",{className:styles.movies,children:/*#__PURE__*/_jsx(PostersTemplate,{postersData:movies,type:\"moviePosters\"})},movies.id);})}),totalResults>moviesData.length?/*#__PURE__*/_jsx(Pagination,{handleBackPage:handleBackPage,handleNextPage:handleNextPage}):null]});};export default Movies;","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","useSearchParams","useParams","service","Link","useTranslation","Rating","Image","Genres","PostersTemplate","Pagination","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Movies","_useState","_useState2","_slicedToArray","moviesData","setMoviesData","_useState3","_useState4","totalResults","setTotalResults","_useSearchParams","_useSearchParams2","searchParams","setSearchParams","_useTranslation","t","i18n","concat","get","then","_ref","data","results","total_results","page","language","handleBackPage","parseInt","handleNextPage","children","className","moviesContainer","map","movies","postersData","type","id","length"],"sources":["C:/Users/satoshi_khd/Desktop/tmdb-app-router/src/pages/Movies/Movies.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate, useSearchParams, useParams } from \"react-router-dom\";\nimport { service } from \"../../api/service\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport Rating from \"../../components/Rating/Rating\";\nimport Image from \"../../components/Image/Image\";\nimport Genres from \"../../components/Genres/Genres\";\nimport PostersTemplate from \"../../components/PostersTemplate/PostersTemplate\";\nimport Pagination from \"../../components/Pagination/Pagination\";\nimport styles from \"./Movies.module.css\";\n\nconst Movies = () => {\n  const [moviesData, setMoviesData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { t, i18n } = useTranslation();\n\n  useEffect(() => {\n    service(\n      `https://api.themoviedb.org/3/movie/popular?language=${t(\n        \"api-code\"\n      )}&page=${searchParams.get(\"page\") ? searchParams.get(\"page\") : 1}`,\n      \"GET\"\n    ).then(({ data }) => {\n      setMoviesData(data.results); //data.results equal to 20, then content per page will be 20;\n      setTotalResults(data.total_results);\n    });\n    setSearchParams({\n      page: searchParams.get(\"page\") ? searchParams.get(\"page\") : 1,\n    });\n  }, [i18n.language, searchParams]);\n\n  const handleBackPage = () =>\n    setSearchParams({ page: parseInt(searchParams.get(\"page\", 10)) - 1 });\n\n  const handleNextPage = () =>\n    setSearchParams({ page: parseInt(searchParams.get(\"page\", 10)) + 1 });\n\n  return (\n    <>\n      <div className={styles.moviesContainer}>\n        {moviesData.map((movies) => (\n          <div className={styles.movies} key={movies.id}>\n            <PostersTemplate postersData={movies} type={\"moviePosters\"} />\n          </div>\n        ))}\n      </div>\n      {totalResults > moviesData.length ? (\n        <Pagination\n          handleBackPage={handleBackPage}\n          handleNextPage={handleNextPage}\n        />\n      ) : null}\n    </>\n  );\n};\nexport default Movies;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}