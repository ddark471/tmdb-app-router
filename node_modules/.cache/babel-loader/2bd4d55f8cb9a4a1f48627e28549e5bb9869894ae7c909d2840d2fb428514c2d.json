{"ast":null,"code":"import _slicedToArray from\"C:/Users/satoshi_khd/Desktop/tmdb-app-router/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useLocation,useSearchParams}from'react-router-dom';import{useTranslation}from'react-i18next';import{service}from'../../api/service';import PostersTemplate from'../PostersTemplate/PostersTemplate';import Pagination from'../Pagination/Pagination';import NavBar from'../NavBar/NavBar';import styles from'../Movies/Movies.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchPage=function SearchPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchResults=_useState2[0],setSearchResults=_useState2[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currPage=_useState4[0],setCurrPage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalPages=_useState6[0],setTotalPages=_useState6[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var location=useLocation();useEffect(function(){service(\"https://api.themoviedb.org/3/search/movie?query=\".concat(searchParams.get(\"query\"),\"&language=\").concat(t('api-code'),\"&page=\").concat(currPage),'GET').then(function(_ref){var data=_ref.data;setSearchResults(data.results);setTotalPages(data.total_pages);});setSearchParams({\"query\":searchParams.get(\"query\"),\"page\":currPage});},[searchParams,currPage]);var handleBackPage=function handleBackPage(){return setCurrPage(currPage-1);};var handleNextPage=function handleNextPage(){return setCurrPage(currPage+1);};useEffect(function(){setCurrPage(1);},[searchParams.get(\"query\")]);console.log(location);return/*#__PURE__*/_jsxs(_Fragment,{children:[searchResults?/*#__PURE__*/_jsxs(\"div\",{className:styles.moviesContainer,children:[\" \",searchResults.map(function(movies){return/*#__PURE__*/_jsx(PostersTemplate,{postersData:movies,type:\"moviePosters\"});})]}):/*#__PURE__*/_jsx(\"h1\",{children:\"404 Not Found\"}),totalPages>=1?/*#__PURE__*/_jsx(Pagination,{handleBackPage:handleBackPage,handleNextPage:handleNextPage,currPage:currPage,totalPages:totalPages}):null]});};export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useSearchParams","useTranslation","service","PostersTemplate","Pagination","NavBar","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchPage","_useState","_useState2","_slicedToArray","searchResults","setSearchResults","_useSearchParams","_useSearchParams2","searchParams","setSearchParams","_useState3","_useState4","currPage","setCurrPage","_useState5","_useState6","totalPages","setTotalPages","_useTranslation","t","location","concat","get","then","_ref","data","results","total_pages","handleBackPage","handleNextPage","console","log","children","className","moviesContainer","map","movies","postersData","type"],"sources":["C:/Users/satoshi_khd/Desktop/tmdb-app-router/src/Components/Search/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation, useSearchParams} from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { service } from '../../api/service';\nimport PostersTemplate from '../PostersTemplate/PostersTemplate';\nimport Pagination from '../Pagination/Pagination'\nimport NavBar from '../NavBar/NavBar'\nimport styles from '../Movies/Movies.module.css'\n\nconst SearchPage = () => {\n    const [searchResults, setSearchResults] = useState([]);\n    const [searchParams, setSearchParams] = useSearchParams();\n    const [currPage, setCurrPage] = useState(1);\n    const [totalPages, setTotalPages]= useState(0);\n    const { t } = useTranslation();\n    const location = useLocation();\n\n    useEffect(() => {\n\n        service(`https://api.themoviedb.org/3/search/movie?query=${searchParams.get(\"query\")}&language=${t('api-code')}&page=${currPage}`, 'GET').then(({data}) => {\n            setSearchResults(data.results)\n            setTotalPages(data.total_pages)});\n            setSearchParams({\"query\": searchParams.get(\"query\"), \"page\": currPage});\n        },[searchParams, currPage])\n\n    const handleBackPage = () => setCurrPage(currPage - 1);\n    \n    const handleNextPage = () => setCurrPage(currPage + 1);\n\n    useEffect(() => {\n        setCurrPage(1)\n    }, [searchParams.get(\"query\")])\n\n        console.log(location)\n\n    return (\n        <>\n            {searchResults ? (<div className={styles.moviesContainer}> {searchResults.map(movies => <PostersTemplate postersData={movies} type={\"moviePosters\"} />)}</div>):(<h1>404 Not Found</h1>)}\n            {totalPages >= 1 ? (<Pagination handleBackPage={handleBackPage} handleNextPage={handleNextPage} currPage={currPage} totalPages={totalPages}/>):null }\n        </>)}\nexport default SearchPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}