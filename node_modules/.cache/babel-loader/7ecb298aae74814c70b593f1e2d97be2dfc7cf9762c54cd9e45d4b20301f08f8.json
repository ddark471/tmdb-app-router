{"ast":null,"code":"import _slicedToArray from\"C:/Users/satoshi_khd/Desktop/tmdb-app-router/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useLocation,useSearchParams,useNavigate}from\"react-router-dom\";import{useTranslation}from\"react-i18next\";import{service}from\"../../api/service\";import PostersTemplate from\"../../components/PostersTemplate/PostersTemplate\";import Pagination from\"../../components/Pagination/Pagination\";import NavBar from\"../../components/NavBar/NavBar\";import styles from\"../Movies/Movies.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchPage=function SearchPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchResults=_useState2[0],setSearchResults=_useState2[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalResults=_useState4[0],setTotalResults=_useState4[1];var navigate=useNavigate();var _useTranslation=useTranslation(),t=_useTranslation.t;var query=searchParams.get(\"query\");useEffect(function(){service(\"https://api.themoviedb.org/3/search/movie?query=\".concat(query,\"&language=\").concat(t(\"api-code\"),\"&page=\").concat(searchParams.get(\"page\")?searchParams.get(\"page\"):1),\"GET\").then(function(_ref){var data=_ref.data;console.log(data);setSearchResults(data.results);setTotalResults(data.total_results);});setSearchParams({query:query,page:searchParams.get(\"page\")?searchParams.get(\"page\"):1});},[searchParams]);var handleBackPage=function handleBackPage(){return setSearchParams({query:searchParams.get(\"query\"),page:searchParams.get(\"page\")-1});};var handleNextPage=function handleNextPage(){return setSearchParams({query:searchParams.get(\"query\"),page:parseInt(searchParams.get(\"page\",10))+1});};useEffect(function(){setSearchParams({query:searchParams.get(\"query\"),page:navigate(-1)||1});},[query]);return/*#__PURE__*/_jsxs(_Fragment,{children:[searchResults?/*#__PURE__*/_jsxs(\"div\",{className:styles.moviesContainer,children:[\" \",searchResults.map(function(movies){return/*#__PURE__*/_jsx(PostersTemplate,{postersData:movies,type:\"moviePosters\"},movies.id);})]}):/*#__PURE__*/_jsx(\"h1\",{children:\"404 Not Found\"}),totalResults>=20?/*#__PURE__*/_jsx(Pagination,{handleBackPage:handleBackPage,handleNextPage:handleNextPage}):null]});};export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useSearchParams","useNavigate","useTranslation","service","PostersTemplate","Pagination","NavBar","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchPage","_useState","_useState2","_slicedToArray","searchResults","setSearchResults","_useSearchParams","_useSearchParams2","searchParams","setSearchParams","_useState3","_useState4","totalResults","setTotalResults","navigate","_useTranslation","t","query","get","concat","then","_ref","data","console","log","results","total_results","page","handleBackPage","handleNextPage","parseInt","children","className","moviesContainer","map","movies","postersData","type","id"],"sources":["C:/Users/satoshi_khd/Desktop/tmdb-app-router/src/pages/SearchPage/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation, useSearchParams, useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { service } from \"../../api/service\";\nimport PostersTemplate from \"../../components/PostersTemplate/PostersTemplate\";\nimport Pagination from \"../../components/Pagination/Pagination\";\nimport NavBar from \"../../components/NavBar/NavBar\";\nimport styles from \"../Movies/Movies.module.css\";\n\nconst SearchPage = () => {\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [totalResults, setTotalResults] = useState(0);\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const query = searchParams.get(\"query\");\n\n  useEffect(() => {\n    service(\n      `https://api.themoviedb.org/3/search/movie?query=${query}&language=${t(\n        \"api-code\"\n      )}&page=${searchParams.get(\"page\") ? searchParams.get(\"page\") : 1}`,\n      \"GET\"\n    ).then(({ data }) => {\n      console.log(data);\n      setSearchResults(data.results);\n      setTotalResults(data.total_results);\n    });\n    setSearchParams({\n      query: query,\n      page: searchParams.get(\"page\") ? searchParams.get(\"page\") : 1,\n    });\n  }, [searchParams]);\n\n  const handleBackPage = () =>\n    setSearchParams({\n      query: searchParams.get(\"query\"),\n      page: searchParams.get(\"page\") - 1,\n    });\n\n  const handleNextPage = () =>\n    setSearchParams({\n      query: searchParams.get(\"query\"),\n      page: parseInt(searchParams.get(\"page\", 10)) + 1,\n    });\n\n  useEffect(() => {\n    setSearchParams({\n      query: searchParams.get(\"query\"),\n      page: navigate(-1) || 1,\n    });\n  }, [query]);\n\n  return (\n    <>\n      {searchResults ? (\n        <div className={styles.moviesContainer}>\n          {\" \"}\n          {searchResults.map((movies) => (\n            <PostersTemplate\n              postersData={movies}\n              type={\"moviePosters\"}\n              key={movies.id}\n            />\n          ))}\n        </div>\n      ) : (\n        <h1>404 Not Found</h1>\n      )}\n      {totalResults >= 20 ? (\n        <Pagination\n          handleBackPage={handleBackPage}\n          handleNextPage={handleNextPage}\n        />\n      ) : null}\n    </>\n  );\n};\nexport default SearchPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}